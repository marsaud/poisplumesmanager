<?php
$this->addHelperPath(realpath(dirname(__FILE__) . '/../../helpers'), 'Admin_View_Helper');
$this->placeholder('nav')->set($this->action('menu', 'index', 'admin'));
?>
<div class="leftpart col-lg-4">
    <form method="post" action="<?php echo $this->baseUrl('admin/tax/create'); ?>" id="createtaxform">
        <fieldset>
            <legend>Créer une taxe</legend>
            <div class="form-group">
                <label for="name">Nom de la taxe</label>
                <input id="name" name="name" type="text" required autocomplete="off" class="form-control"/>
            </div>
            <div class="form-group">
                <label for="ratio">Ratio (%)</label>
                <input id="ratio" name="ratio" type="number" required step=0.01 max="100" min="0" value="0" autocomplete="off" class="form-control"/>
            </div>
            <div class="form-group">
                <label for="desc">Description de la taxe</label>
                <textarea id="desc" name="desc" placeholder="facultatif" class="form-control"></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Créer</button>
        </fieldset>
    </form>
    <form method="post" action="<?php echo $this->baseUrl('admin/tax/update'); ?>" id="updatetaxform">
        <fieldset>
            <legend>Modifier une taxe</legend>
            <div class="form-group">
                <label for="modid">Nom de la taxe à modifier</label>
                <select id="modid" name="modid" required class="form-control">
                    <option></option>
                    <?php echo $this->taxOptions($this->taxes); ?>
                </select>
            </div>
            <div class="form-group">
                <label for="modratio">Ratio (%)</label>
                <input id="modratio" name="modratio" type="number" step=0.01  max="100" min="0" autocomplete="off" class="form-control"/>
            </div>
            <div class="form-group">
                <label for="moddesc">Description de la taxe</label>
                <textarea id="moddesc" name="moddesc" placeholder="facultatif" class="form-control"></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Modifier</button>
        </fieldset>
    </form>
</div>
<div id="taxlist" class="rightpart col-lg-8">
    <table class="table table-striped">
        <caption>Taxes existantes</caption>
        <tr>
            <th>Nom</th><th>Ratio</th><th>Description</th>
        </tr>
        <?php
        echo $this->taxRows($this->taxes);
        ?>
    </table>
</div>
<?php $this->placeholder('scripts')->captureStart(); ?>
<script type="text/javascript" src="<?php echo $this->baseUrl('js/admin/tax.js'); ?>"></script>
<script type="text/javascript">
    jQuery(document).ready(taxInit);
</script>
<?php
$this->placeholder('scripts')->captureEnd();
