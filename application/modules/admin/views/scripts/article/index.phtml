<?php
$this->addHelperPath(dirname(__FILE__) . '/../../helpers', 'Admin_View_Helper');
?>
<h1>Gestion des articles</h1>
<div class="leftpart">
    <form method="post" action="<?php echo $this->baseUrl('admin/article/create'); ?>" id="createarticleform" class="createform adminform">
        <fieldset>
            <legend>Créer un article</legend>
            <label for="ref">Référence de l'article</label>
            <input id="ref" type="text" name="ref" autocomplete="off"/>
            <br/>
            <label for="name">Nom de l'article</label>
            <input id="name" type="text" name="name" autocomplete="off"/>
            <br/>
            <label for="desc">Description de l'article (optionel)</label>
            <textarea id="desc" name="desc">(r.a.s.)</textarea>
            <br/>
            <label for="priceht">Prix TTC</label>
            <input id="priceht" type="text" name="priceht"/>
            <?php
            echo $this->taxBox('tva', $this->taxList, 'T.V.A.');
            ?>
            <br />
            <?php
            echo $this->promoSelect(
                    'promo', $this->promoList, 'Promotions appliquées à l\'article'
            );
            ?>
            <br />
            <?php
            echo $this->categorySelect(
                    'cat', $this->categoryTree, 'Catégories auxquelles appartient l\'article'
            );

            echo $this->providerBox(
                    'provider', $this->providerList, 'Fournisseur (optionel)'
            );
            ?>
            <fieldset>
                <legend>Gestion du stock</legend>
                <label for="stock">Géré en stock</label>
                <input id="stock" type="checkbox" name="stock" value="off" /><br/>
                <label for="unit">Unité de quantité (optionel)</label>
                <input type="text" name="unit" id="unit" autocomplete="off"/>
            </fieldset>
            <input type="submit" value="Créer"/>
        </fieldset>
    </form>
    <form method="post" action="<?php echo $this->baseUrl('admin/article/update'); ?>" id="updatearticleform" class="updateform adminform">
        <fieldset>
            <legend>Modifier un article</legend>
            <?php
            echo $this->articleBox(
                    'modref', $this->articleList, 'Référence de l\'article à modifier'
            );
            ?>
            <br/>
            <label for="modname">Nom de l'article</label>
            <input id="modname" type="text" name="modname" autocomplete="off"/>
            <br/>
            <label for="moddesc">Description de l'article (optionel)</label>
            <textarea id="moddesc" name="moddesc">(r.a.s.)</textarea>
            <br/>
            <label for="modpriceht">Prix TTC</label>
            <input id="modpriceht" type="text" name="modpriceht"/>
            <?php
            echo $this->taxBox('modtva', $this->taxList, 'T.V.A.');
            ?>
            <br />
            <?php
            echo $this->promoSelect(
                    'modpromo', $this->promoList, 'Promotions appliquées à l\'article'
            );
            ?>
            <br />
            <?php
            echo $this->categorySelect(
                    'modcat', $this->categoryTree, 'Catégories auxquelles appartient l\'article'
            );

            echo $this->providerBox(
                    'modprovider', $this->providerList, 'Fournisseur (optionel)'
            );
            ?>
            <fieldset>
                <legend>Gestion du stock</legend>
                <label for="modstock">Géré en stock</label>
                <input id="modstock" type="checkbox" name="modstock" value="off" /><br/>
                <label for="modunit">Unité de quantité (optionel)</label>
                <input type="text" name="modunit" id="modunit" autocomplete="off"/>
            </fieldset>
            <input type="submit" value="Modifier"/>
        </fieldset>
    </form>
</div>
<div id="articlelist" class="listdisplay rightpart">
<?php
echo $this->articleList($this->articleList, 'Liste des articles');
?>
</div>
<script type="text/javascript" src="<?php echo $this->baseUrl('js/admin/article.js'); ?>"></script>
<script type="text/javascript">
    articleInit();
</script>